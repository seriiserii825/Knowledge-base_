## Синтаксис команды tr в Linux

Программа обрабатывает текст посимвольно. По умолчанию у её синтаксиса следующий вид (квадратные скобки указывают, что аргумент не обязателен):

**tr \[КЛЮЧ\]... НАБОР1 \[НАБОР2\]**

Всего доступно 4 ключа для уточнения операции над символами:

<table><tbody><tr><td style="text-align: center;"><strong>Ключ</strong></td><td style="text-align: center;"><strong>Длинный вариант</strong></td><td style="text-align: center;"><strong>Значение</strong></td></tr><tr><td>-c, -C</td><td>--complement</td><td>Сначала получить дополнение НАБОРА1</td></tr><tr><td>-d</td><td>--delete</td><td>Удалить знаки из НАБОРА2, не превращать</td></tr><tr><td>-s</td><td>--squeeze-repeats</td><td>Замещать последовательность знаков, которые повторяются, из перечисленных в последнем НАБОРЕ, на один такой знак</td></tr><tr><td>-t</td><td>--truncate-set1</td><td>Сначала сократить НАБОР1 до размеров НАБОРА2</td></tr></tbody></table>

НАБОРЫ указываются как символьные строки. В большинстве случаев символы представляют сами себя. Полный набор опций представлен в следующей таблице:

<table><tbody><tr><td style="text-align: center;"><strong>Опция</strong></td><td style="text-align: center;"><strong>Значение</strong></td></tr><tr><td>\HHH</td><td>Знак в восьмеричной кодировке (с трех цифр ННН)</td></tr><tr><td>\\</td><td>Обратный слэш</td></tr><tr><td>\b</td><td>Забой</td></tr><tr><td>\f</td><td>Перевод страницы</td></tr><tr><td>\n</td><td>Начать с новой строки</td></tr><tr><td>\r</td><td>Возврат каретки</td></tr><tr><td>\t</td><td>Горизонтальная табуляция</td></tr><tr><td>\v</td><td>Вертикальная табуляция</td></tr><tr><td>ЗНАК1-ЗНАК2</td><td>Все знаки от ЗНАК1 до ЗНАК2 в порядке возрастания</td></tr><tr><td>[ЗНАК*]</td><td>ЗНАК заполняет НАБОР2 до длины НАБОРА1</td></tr><tr><td>[ЗНАК*ЧИСЛО]</td><td>Указанное ЧИСЛО одинаковых ЗНАКОВ; ЧИСЛО восьмиричных, если начинается с 0</td></tr><tr><td>[:alnum:]</td><td>Все буквы и цифры</td></tr><tr><td>[:alpha:]</td><td>Все буквы</td></tr><tr><td>[:blank:]</td><td>Все горизонтальные пробельные символы</td></tr><tr><td>[:cntrl:]</td><td>Все управляющие знаки</td></tr><tr><td>[:digit:]</td><td>Все цифры</td></tr><tr><td>[:graph:]</td><td>Все печатаемые знаки, исключая пробел</td></tr><tr><td>[:lower:]</td><td>Все маленькие буквы</td></tr><tr><td>[:print:]</td><td>Все печатаемые знаки, включая пробел</td></tr><tr><td>[:punct:]</td><td>Все знаки пунктуации</td></tr><tr><td>[:space:]</td><td>Все вертикальные и горизонтальные пробельные знаки</td></tr><tr><td>[:upper:]</td><td>Все большие буквы</td></tr><tr><td>[:xdigit:]</td><td>Все шестнадцатиричные цифры</td></tr><tr><td>[=ЗНАК=]</td><td>Все знаки, эквивалентные ЗНАКУ</td></tr></tbody></table>

Превращение осуществляется, если не указано **\-d** для обоих НАБОРОВ. **\-t** можно использовать только во время превращения. Если нужно, НАБОР2 будет расширен до размеров НАБОРА1 повторением последнего символа. Лишние символы НАБОРА2 будут пропущены. Гарантированно расширяются в порядке возрастания только **\[:lower:\]** и **\[:upper:\]**. Использованные символы в НАБОРЕ2 во время превращения можно применять для определения превращения регистра только в парах. **\-s** использует последний указанный набор. Уплотнение происходит после превращения или удаления.

## Примеры использования tr

### 1\. Замена символов через аргументы

Программа по умолчанию работает со стандартным вводом/выводом.

**Пример 1**. Заменить все **x** на **z**.

`tr x z`

(adsbygoogle = window.adsbygoogle || \[\]).push({});

Далее следует ввести строку и нажать **Enter**. Ниже будет выведен обработанный результат и представлена возможность повторного ввода.

[![Замена в tr](https://losst.pro/wp-content/uploads/2018/05/tr-x-z-1024x671.png)](https://losst.pro/wp-content/uploads/2018/05/tr-x-z.png)

Для выхода из программы нажмите **Ctrl** + **D**.

**Пример 2**. Удалить все буквы в нижнем регистре.

`tr -d [:lower:]`

[![Удаление букв в нижнем регистре](https://losst.pro/wp-content/uploads/2018/05/tr-d-lower-1024x675.png)](https://losst.pro/wp-content/uploads/2018/05/tr-d-lower.png)

**Пример 3**. Уплотнить повторяющиеся буквы большого и малого регистров.

`tr -s [:upper:][:lower:]`

[![Уплотнение в tr](https://losst.pro/wp-content/uploads/2018/05/tr-s-1024x688.png)](https://losst.pro/wp-content/uploads/2018/05/tr-s.png)

### 2\. Работа с потоками

Команда **tr** может принимать на вход результат работы другой программы с использованием пайпа.

**Пример 4**. Вывести первые три строки файла **/etc/passwd**, заменив двоеточия (используемые в качестве разделителя данных) на пробелы.

`head -n3 /etc/passwd | tr ':' ' '`

[![tr принимает на вход данные](https://losst.pro/wp-content/uploads/2018/05/pipe-tr-1024x665.png)](https://losst.pro/wp-content/uploads/2018/05/pipe-tr.png)

Также можно использовать перенаправление потока ввода и вывода.

**Пример 5**. Заменить цифры IP-адреса файла addresses2 на буквы **a**, и результат записать в файл addresses3.

`tr [0-9] a < addresses2 > addresses3`

(adsbygoogle = window.adsbygoogle || \[\]).push({});

[![Работа ввода/вывода и tr](https://losst.pro/wp-content/uploads/2018/05/tr-io-1024x637.png)](https://losst.pro/wp-content/uploads/2018/05/tr-io.png)
