# Database

```ts
class Database {
  connect() {}
  read() {}
  write() {}
}
```

Как неопытные разработчики добавляем еще и joinTables

```ts
class AdvancedDatabase extends Database {
  connect() {}
  read() {}
  write() {}
  joinTables() {}
}
```

Добавляем MySqlDatabase и расширяем Database

```ts
class MySqlDatabase extends AdvancedDatabase {
  connect() {
    console.log("Connecting to MySQL database");
  }
  read() {
    console.log("Reading data from MySQL database");
  }
  write() {
    console.log("Writing data to MySQL database");
  }
  joinTables() {
    console.log("Joining tables in MySQL database");
  }
}
```

Добавляем MongoDBDatabase, но у нее нет joinTables

```ts
class MongoDBDatabase extends Database {
  connect() {
    console.log("Connecting to MongoDB database");
  }
  read() {
    console.log("Reading data from MongoDB database");
  }
  write() {
    console.log("Writing data to MongoDB database");
  }
  joinTables() {
    throw new Error("Method not implemented.");
  }
}
```

И, чтобы не иплементировать joinTables, мы кидаем ошибку. Нарушая принцип подстановки Лисков.

Чему это грозит?
Это приведет к тому, что если кто-то будет использовать MongoDBDatabase через тип AdvancedDatabase и вызовет метод joinTables, то получит ошибку во время выполнения программы.
Это нарушает ожидания пользователей класса и может привести к сбоям в работе приложения.

### Решение

Создаем класс для sql и mongo

```ts
class SqlDatabase extends Database {
  connect() {}
  read() {}
  write() {}
  joinTables() {}
}
class NoSqlDatabase extends Database {
  connect() {}
  read() {}
  write() {}
  createIndex() {}
}

class MysqlDatabase extends SqlDatabase {
  connect() {
    console.log("Connecting to MySQL database");
  }
  read() {
    console.log("Reading data from MySQL database");
  }
  write() {
    console.log("Writing data to MySQL database");
  }
  joinTables() {
    console.log("Joining tables in MySQL database");
  }
}
class MongoDBDatabase extends NoSqlDatabase {
  connect() {
    console.log("Connecting to MongoDB database");
  }
  read() {
    console.log("Reading data from MongoDB database");
  }
  write() {
    console.log("Writing data to MongoDB database");
  }
  createIndex() {
    console.log("Creating index in MongoDB database");
  }
}
```

Теперь у нас есть два отдельных класса для SQL и NoSQL баз данных.

- В Database мы определяем только общие методы connect, read и write.
- В SqlDatabase мы добавляем метод joinTables, который реализуют только SQL базы данных.
- В NoSqlDatabase мы добавляем метод createIndex, который реализуют только NoSQL базы данных.

### Использование

```ts
function startApp(db: Database) {
  db.connect();
}
startApp(new MysqlDatabase());
startApp(new MongoDBDatabase());
```

Оба класса дополняют поведение базового класса Database, не нарушая принцип подстановки Лисков.
